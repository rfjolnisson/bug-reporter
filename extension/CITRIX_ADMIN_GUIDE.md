# Kaptio JIRA Reporter - Citrix Admin Installation Guide

## Overview

This Chrome extension allows users to quickly report bugs and issues to JIRA by:
1. Capturing browser console logs automatically
2. Taking a screenshot of the current page
3. Submitting to JIRA with a user-friendly Kaptio-branded form

The extension works on all websites, including Salesforce Lightning (which blocks bookmarklets due to CSP).

---

## Prerequisites

- Chrome browser (version 88 or higher)
- Access to the backend API server (default: `http://localhost:3519`)
- JIRA credentials configured in the backend

---

## Installation Steps for Citrix Admins

### Step 1: Download the Extension

1. Download the `kaptio-jira-reporter-extension.zip` file
2. Extract the ZIP file to a location accessible to users (e.g., shared network drive or Citrix app folder)
3. Note the extracted folder path (e.g., `C:\Extensions\kaptio-jira-reporter\`)

### Step 2: Install Extension in Chrome

**For Each User Machine:**

1. **Open Chrome**

2. **Navigate to Extensions Page:**
   - Type `chrome://extensions/` in the address bar, OR
   - Click the three-dot menu ‚Üí More Tools ‚Üí Extensions

3. **Enable Developer Mode:**
   - Toggle the "Developer mode" switch in the top-right corner
   - This enables loading unpacked extensions

4. **Load the Extension:**
   - Click the "Load unpacked" button
   - Browse to the extracted extension folder
   - Select the folder containing `manifest.json`
   - Click "Select Folder"

5. **Verify Installation:**
   - The extension should appear in the extensions list
   - Extension name: "Kaptio JIRA Reporter"
   - A bug icon (üêõ) should appear in the Chrome toolbar
   - Extension ID will be auto-generated by Chrome

### Step 3: Pin to Toolbar (Optional but Recommended)

1. Click the puzzle piece icon in Chrome toolbar
2. Find "Kaptio JIRA Reporter"
3. Click the pin icon to keep it visible

---

## Configuration

### Backend API URL

By default, the extension connects to `http://localhost:3519`. To change this:

1. Open the extension folder
2. Edit `popup.js`
3. Change line 5: `const API_URL = 'http://localhost:3519';`
4. Save the file
5. Reload the extension in Chrome:
   - Go to `chrome://extensions/`
   - Click the reload icon on the Kaptio JIRA Reporter card

### JIRA Configuration

JIRA settings are configured in the backend server (not the extension):
- Edit the `.env` file in the server directory
- Configure `JIRA_BASE_URL`, `JIRA_EMAIL`, `JIRA_API_TOKEN`, and `JIRA_PROJECT_KEY`
- Restart the server

---

## Usage Instructions for End Users

### Using the Extension

1. **Navigate to a page** where you want to report an issue (e.g., Salesforce, internal apps)

2. **Click the extension icon** in the Chrome toolbar (bug icon üêõ)

3. **Fill in the form:**
   - **Title** - Brief description of the issue (required)
   - **Description** - Detailed explanation
   - **Priority** - Select priority level (optional)
   - **Labels** - Add comma-separated labels (optional)

4. **Review captured data:**
   - Console logs are automatically captured and shown in the preview
   - Screenshot is captured when you open the popup

5. **Submit** - Click "Submit to JIRA"

6. **Success** - You'll get a link to the created JIRA issue

### Console Log Capture

The extension automatically captures ALL console activity:
- `console.log()` - Standard logs
- `console.warn()` - Warnings
- `console.error()` - Errors
- `console.info()` - Info messages
- `console.debug()` - Debug messages
- `console.clear()` - Tracked as "[Console was cleared]"

Logs are captured from when the page loads until you click the extension icon.

---

## Troubleshooting

### Extension Icon Not Visible

- Check that the extension is enabled in `chrome://extensions/`
- Pin the extension to the toolbar (click puzzle piece icon)
- Refresh the Chrome extensions page

### "Extension Not Installed" Error

- Verify the extension folder path is correct
- Check that `manifest.json` exists in the folder
- Try removing and re-adding the extension

### Console Logs Not Captured

- The extension only captures logs AFTER the page loads
- Refresh the page after installing the extension
- Check Chrome DevTools ‚Üí Console to verify logs are appearing

### Screenshot Not Captured

- Grant the extension permission to access the page when prompted
- Some pages may block screenshots due to security policies
- The extension will still work with console logs only

### Cannot Connect to Backend

- Verify the backend server is running (`npm start` in server directory)
- Check the API URL in `popup.js` matches your server URL
- Check CORS settings in server `.env` file

### JIRA Submission Failed

- Verify JIRA credentials in server `.env` file
- Check JIRA project key is correct
- Review server logs for detailed error messages
- Check database connection is working

---

## Updating the Extension

When a new version is released:

1. **Download the new extension ZIP**
2. **Extract to the same location** (overwrite old files)
3. **Reload in Chrome:**
   - Go to `chrome://extensions/`
   - Find "Kaptio JIRA Reporter"
   - Click the reload icon (circular arrow)

Users do NOT need to reinstall, just reload.

---

## Distribution Methods

### Method 1: Network Share (Recommended for Citrix)

1. Place the extension folder on a shared network drive
2. Users install from the network location
3. Updates are distributed by updating files on the network share

### Method 2: Local Copy

1. Copy extension folder to each user's machine
2. Users install from their local copy
3. Updates require copying new files to each machine

### Method 3: Internal Web Server

1. Host the extension ZIP on an internal web server
2. Users download and extract
3. Install from extracted folder

---

## Security Considerations

### Permissions

The extension requests:
- `activeTab` - Access to the current tab only (not all tabs)
- `storage` - Store captured data temporarily
- `tabs` - Read tab information (URL, title)
- `scripting` - Inject content script for console capture
- `http://localhost:3519/*` - Connect to backend API

### Data Handling

- Console logs and screenshots are captured in memory only
- Data is sent directly to the backend API
- Nothing is stored permanently in the extension
- LocalStorage is cleared after submission

### Network Traffic

- Extension only communicates with your backend API server
- No data sent to external services
- All JIRA communication happens server-side

---

## Support

For issues or questions:
1. Check the troubleshooting section above
2. Review server logs for backend errors
3. Check Chrome DevTools Console for client-side errors
4. Contact your internal development team

---

## Version History

- **v1.0.0** - Initial release with console capture, screenshots, and JIRA integration

---

## Files Included

```
kaptio-jira-reporter/
‚îú‚îÄ‚îÄ manifest.json           # Extension configuration
‚îú‚îÄ‚îÄ background.js           # Background service worker
‚îú‚îÄ‚îÄ content-script.js       # Console capture script
‚îú‚îÄ‚îÄ popup.html              # Extension popup UI
‚îú‚îÄ‚îÄ popup.js                # Popup logic
‚îú‚îÄ‚îÄ styles.css              # Kaptio-branded styles
‚îú‚îÄ‚îÄ icons/
‚îÇ   ‚îú‚îÄ‚îÄ icon16.png          # Toolbar icon (small)
‚îÇ   ‚îú‚îÄ‚îÄ icon48.png          # Extensions page icon
‚îÇ   ‚îî‚îÄ‚îÄ icon128.png         # Chrome Web Store icon
‚îú‚îÄ‚îÄ CITRIX_ADMIN_GUIDE.md   # This file
‚îî‚îÄ‚îÄ README_INSTALL.md       # Quick installation reference
```

---

## Advanced Configuration

### Custom Backend URL for Production

When deploying to Railway or production:

1. Edit `popup.js`
2. Change `API_URL` to your production URL (e.g., `https://your-app.railway.app`)
3. Update CORS settings in server `.env`:
   ```
   CORS_ORIGIN=https://your-domain.com
   ```

### Custom JIRA Project

Configured in server `.env`:
```
JIRA_PROJECT_KEY=YOUR_PROJECT
JIRA_ISSUE_TYPE=Bug
```

---

## Appendix: Command Line Installation Script

For IT admins who want to automate installation:

```bash
#!/bin/bash
# install-kaptio-extension.sh

EXTENSION_PATH="/path/to/extension/folder"
CHROME_PREFS="$HOME/Library/Application Support/Google/Chrome/Default/Preferences"

# Note: Chrome doesn't support CLI installation of unpacked extensions
# Users must manually load via chrome://extensions/

echo "Please install the extension manually:"
echo "1. Open chrome://extensions/"
echo "2. Enable Developer Mode"
echo "3. Click 'Load unpacked'"
echo "4. Select: $EXTENSION_PATH"
```

---

**End of Admin Guide**

